(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{23:function(e,t,a){e.exports={tan:"#9e7227"}},24:function(e,t,a){e.exports=a(69)},67:function(e,t,a){e.exports={tan:"#9e7227"}},69:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(7),o=a.n(i),c=a(3),s=a(4),l=a(6),m=a(5),u=a(8),d=a.n(u),p="6c8ca7a74ad9d3301728396fc82b6227",f=function(){return d.a.get("http://api.openweathermap.org/data/2.5/weather?q=london,uk&APPID=".concat(p,"&units=metric"))},h=function(){return d.a.get("http://api.openweathermap.org/data/2.5/forecast?q=london,uk&APPID=".concat(p,"&units=metric"))},g=function(e){return["sun","mon","tue","wed","thu","fri","sat"][new Date(1e3*e).getUTCDay()]},v=function(){var e=new Date,t=e.getUTCHours().toString().padStart(2,0),a=e.getUTCMinutes().toString().padStart(2,0);return"".concat(t,":").concat(a," GMT")},T=a(2),_=function(e){return n.a.createElement("div",{className:"header"},n.a.createElement("span",{className:"header__location"},e.location),n.a.createElement("div",{className:"header__time-container"},n.a.createElement("div",{className:"header__time"},n.a.createElement("span",{className:"header__dot brown"}),n.a.createElement("span",{className:"header__dot tan"}),n.a.createElement("span",{className:"header__dot gold"}),n.a.createElement(T.Spring,{from:{opacity:0},to:{opacity:1},reset:e.animate,config:{duration:2e3}},(function(t){return n.a.createElement("span",{style:t,className:"header__time_value"},e.time)})),n.a.createElement("span",{className:"header__dot brown"}),n.a.createElement("span",{className:"header__dot tan"}),n.a.createElement("span",{className:"header__dot gold"}))),n.a.createElement(T.Spring,{from:{opacity:0},to:{opacity:1},reset:e.animate,config:{duration:2e3}},(function(t){return n.a.createElement("span",{style:t,className:"header__temperature"},e.temperature||"No Temp","\xb0")})))},y=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).startTimer=function(){r.timerId=setInterval((function(){0===r.state.timer?(r.resetTimer(),r.props.handleTimerFinished()):r.setState((function(e){return{timer:e.timer-1}}))}),1e3)},r.resetTimer=function(){clearInterval(r.timerId),r.setState((function(){return{timer:r.props.initialTime}}))},r.state={timer:e.initialTime},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.props.startTimer&&this.startTimer()}},{key:"componentDidUpdate",value:function(e,t){this.props.startTimer!==e.startTimer&&(this.props.startTimer?this.startTimer():this.resetTimer())}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerId)}},{key:"render",value:function(){var e=100-this.state.timer/this.props.initialTime*100;return n.a.createElement("div",{className:"progress-bar"},n.a.createElement("span",{className:"progress-bar__text"},"Reloading in ".concat(this.state.timer,"s")),n.a.createElement("div",{className:"progress-bar__container"},n.a.createElement("div",{className:"progress-bar__filler",style:{width:"".concat(e,"%")}})))}}]),a}(r.Component),E=function(e){return n.a.createElement("div",{style:e.style,className:"daily-forecast"},n.a.createElement("div",{className:"daily-forecast__day-container"},n.a.createElement("span",{className:"daily-forecast__day"},g(e.day)),n.a.createElement("span",{className:"daily-forecast__temperature"},Math.floor(e.temperature),"\xb0")),n.a.createElement("div",{className:"daily-forecast__forecast-container"},n.a.createElement("img",{className:"daily-forecast__icon-code",src:"http://openweathermap.org/img/wn/".concat(e.iconCode,".png"),alt:"weather forecast icon"}),n.a.createElement("span",{className:"daily-forecast__forecast"},e.forecast)))},N=function(e){return n.a.createElement("div",{className:"five-day-forecast"},0===e.data.length&&n.a.createElement("div",{className:"five-day-forecast__data-not-available"},"No weather forecast data available."),e.data.length>0&&n.a.createElement(T.Transition,{items:e.data,keys:function(e){return e.dt},from:{opacity:0},enter:{opacity:1},reset:e.animate,config:{duration:500},trail:200},(function(e){return function(t){return n.a.createElement(E,{style:t,day:e.dt,temperature:e.main.temp,iconCode:e.weather[0].icon,forecast:e.weather[0].description})}})))},D=a(21),w=a.n(D),S=a(23),b=a.n(S),k=function(e){Object(l.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).getWeatherData=function(){f().then((function(e){var t=e.data.main.temp;h().then((function(e){var a=r.filterForecastData(e.data.list);r.setLatestFetchData(a,t),r.saveWeatherDataToState(a,t)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e);try{var t=r.getLatestFetchData(),a=t.forecastData,n=t.currentTemperature;r.saveWeatherDataToState(a,n)}catch(i){console.log(i)}}))},r.saveWeatherDataToState=function(e,t){r.setState((function(){return{currentTime:v(),currentTemperature:Math.floor(t),startTimer:!0,forecastData:e,animate:!0,loading:!1}}))},r.setLatestFetchData=function(e,t){var a=JSON.stringify(e),r=JSON.stringify(t);localStorage.setItem("forecastData",a),localStorage.setItem("currentTemperature",r)},r.getLatestFetchData=function(){return{forecastData:JSON.parse(localStorage.getItem("forecastData"))||[],currentTemperature:JSON.parse(localStorage.getItem("currentTemperature"))||void 0}},r.filterForecastData=function(e){var t=e.filter((function(e){return 12===new Date(1e3*e.dt).getUTCHours()}));return new Date(1e3*t[0].dt).getUTCDate()===(new Date).getUTCDate()&&5===t.length&&(t.shift(),t.push(e[e.length-1])),t},r.handleTimerFinish=function(){r.setState((function(){return{forecastData:[],startTimer:!1,animate:!1,loading:!0}})),r.getWeatherData()},r.state={currentTime:void 0,currentLocation:"london",currentTemperature:void 0,startTimer:!1,forecastData:[],animate:!1,loading:!0},r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getWeatherData()}},{key:"render",value:function(){var e=this.state,t=e.currentTime,a=e.currentLocation,r=e.currentTemperature,i=e.startTimer,o=e.forecastData,c=e.animate,s=e.loading;return n.a.createElement("div",{className:"weather-app"},n.a.createElement(_,{location:a,time:t,temperature:r,animate:c}),n.a.createElement(y,{startTimer:i,initialTime:60,handleTimerFinished:this.handleTimerFinish}),n.a.createElement("div",{className:"forecast-container"},s&&n.a.createElement("div",{className:"loader"},n.a.createElement(w.a,{size:20,loading:s,color:b.a.tan})),n.a.createElement(N,{data:o,animate:c,loading:s})))}}]),a}(r.Component);a(67),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.3c2c2681.chunk.js.map